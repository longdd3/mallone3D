{"id":"QdeU","dependencies":[{"name":"D:\\Web Development\\mallone3D\\package.json","includedInParent":true,"mtime":1680117085946},{"name":"three","loc":{"line":1,"column":23,"index":23},"parent":"D:\\Web Development\\mallone3D\\src\\js\\app.js","resolved":"D:\\Web Development\\mallone3D\\node_modules\\three\\build\\three.module.js"},{"name":"./shader/fragment.glsl","loc":{"line":2,"column":21,"index":53},"parent":"D:\\Web Development\\mallone3D\\src\\js\\app.js","resolved":"D:\\Web Development\\mallone3D\\src\\js\\shader\\fragment.glsl"},{"name":"./shader/vertex.glsl","loc":{"line":3,"column":19,"index":98},"parent":"D:\\Web Development\\mallone3D\\src\\js\\app.js","resolved":"D:\\Web Development\\mallone3D\\src\\js\\shader\\vertex.glsl"},{"name":"./shader/fragment1.glsl","loc":{"line":4,"column":22,"index":144},"parent":"D:\\Web Development\\mallone3D\\src\\js\\app.js","resolved":"D:\\Web Development\\mallone3D\\src\\js\\shader\\fragment1.glsl"},{"name":"dat.gui","loc":{"line":5,"column":21,"index":192},"parent":"D:\\Web Development\\mallone3D\\src\\js\\app.js","resolved":"D:\\Web Development\\mallone3D\\node_modules\\dat.gui\\build\\dat.gui.module.js"},{"name":"three/examples/jsm/controls/OrbitControls","loc":{"line":6,"column":30,"index":233},"parent":"D:\\Web Development\\mallone3D\\src\\js\\app.js","resolved":"D:\\Web Development\\mallone3D\\node_modules\\three\\examples\\jsm\\controls\\OrbitControls.js"},{"name":"three/examples/jsm/loaders/GLTFLoader.js","loc":{"line":7,"column":27,"index":304},"parent":"D:\\Web Development\\mallone3D\\src\\js\\app.js","resolved":"D:\\Web Development\\mallone3D\\node_modules\\three\\examples\\jsm\\loaders\\GLTFLoader.js"},{"name":"three/examples/jsm/loaders/DRACOLoader","loc":{"line":8,"column":28,"index":376},"parent":"D:\\Web Development\\mallone3D\\src\\js\\app.js","resolved":"D:\\Web Development\\mallone3D\\node_modules\\three\\examples\\jsm\\loaders\\DRACOLoader.js"},{"name":"three/examples/jsm/postprocessing/ShaderPass.js","loc":{"line":10,"column":28,"index":447},"parent":"D:\\Web Development\\mallone3D\\src\\js\\app.js","resolved":"D:\\Web Development\\mallone3D\\node_modules\\three\\examples\\jsm\\postprocessing\\ShaderPass.js"},{"name":"./customPass.js","loc":{"line":11,"column":27,"index":525},"parent":"D:\\Web Development\\mallone3D\\src\\js\\app.js","resolved":"D:\\Web Development\\mallone3D\\src\\js\\customPass.js"},{"name":"three/examples/jsm/postprocessing/EffectComposer.js","loc":{"line":13,"column":31,"index":576},"parent":"D:\\Web Development\\mallone3D\\src\\js\\app.js","resolved":"D:\\Web Development\\mallone3D\\node_modules\\three\\examples\\jsm\\postprocessing\\EffectComposer.js"},{"name":"three/examples/jsm/postprocessing/RenderPass.js","loc":{"line":14,"column":27,"index":658},"parent":"D:\\Web Development\\mallone3D\\src\\js\\app.js","resolved":"D:\\Web Development\\mallone3D\\node_modules\\three\\examples\\jsm\\postprocessing\\RenderPass.js"},{"name":"three/examples/jsm/postprocessing/UnrealBloomPass.js","loc":{"line":15,"column":32,"index":741},"parent":"D:\\Web Development\\mallone3D\\src\\js\\app.js","resolved":"D:\\Web Development\\mallone3D\\node_modules\\three\\examples\\jsm\\postprocessing\\UnrealBloomPass.js"},{"name":"./walkinghall.glb","loc":{"line":17,"column":18,"index":816},"parent":"D:\\Web Development\\mallone3D\\src\\js\\app.js","resolved":"D:\\Web Development\\mallone3D\\src\\js\\walkinghall.glb"},{"name":"./walkinghall.png","loc":{"line":18,"column":20,"index":856},"parent":"D:\\Web Development\\mallone3D\\src\\js\\app.js","resolved":"D:\\Web Development\\mallone3D\\src\\js\\walkinghall.png"},{"name":"gsap","loc":{"line":19,"column":17,"index":893},"parent":"D:\\Web Development\\mallone3D\\src\\js\\app.js","resolved":"D:\\Web Development\\mallone3D\\node_modules\\gsap\\index.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar THREE = _interopRequireWildcard(require(\"three\"));\nvar _fragment = _interopRequireDefault(require(\"./shader/fragment.glsl\"));\nvar _vertex = _interopRequireDefault(require(\"./shader/vertex.glsl\"));\nvar _fragment2 = _interopRequireDefault(require(\"./shader/fragment1.glsl\"));\nvar dat = _interopRequireWildcard(require(\"dat.gui\"));\nvar _OrbitControls = require(\"three/examples/jsm/controls/OrbitControls\");\nvar _GLTFLoader = require(\"three/examples/jsm/loaders/GLTFLoader.js\");\nvar _DRACOLoader = require(\"three/examples/jsm/loaders/DRACOLoader\");\nvar _ShaderPass = require(\"three/examples/jsm/postprocessing/ShaderPass.js\");\nvar _customPass = require(\"./customPass.js\");\nvar _EffectComposer = require(\"three/examples/jsm/postprocessing/EffectComposer.js\");\nvar _RenderPass = require(\"three/examples/jsm/postprocessing/RenderPass.js\");\nvar _UnrealBloomPass = require(\"three/examples/jsm/postprocessing/UnrealBloomPass.js\");\nvar _walkinghall = _interopRequireDefault(require(\"./walkinghall.glb\"));\nvar _walkinghall2 = _interopRequireDefault(require(\"./walkinghall.png\"));\nvar _gsap = _interopRequireDefault(require(\"gsap\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar Sketch = /*#__PURE__*/function () {\n  function Sketch(options) {\n    var _this = this;\n    _classCallCheck(this, Sketch);\n    this.scene = new THREE.Scene();\n    this.container = options.dom;\n    this.width = this.container.offsetWidth;\n    this.height = this.container.offsetHeight;\n    this.renderer = new THREE.WebGLRenderer();\n    this.renderer.setPixelRatio(window.devicePixelRatio);\n    this.renderer.setSize(this.width, this.height);\n    this.renderer.setClearColor(0x21213, 1);\n    this.renderer.outputEncoding = THREE.sRGBEncoding;\n    this.container.appendChild(this.renderer.domElement);\n    this.camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.001, 1000);\n\n    // var frustumSize = 10;\n    // var aspect = window.innerWidth / window.innerHeight;\n    // this.camera = new THREE.OrthographicCamera( frustumSize * aspect / - 2, frustumSize * aspect / 2, frustumSize / 2, frustumSize / - 2, -1000, 1000 );\n\n    this.dracoLoader = new _DRACOLoader.DRACOLoader();\n    this.dracoLoader.setDecoderPath('https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/js/libs/draco/'); // use a full url path\n    this.loader = new _GLTFLoader.GLTFLoader();\n    this.loader.setDRACOLoader(this.dracoLoader);\n    //  this.start = new THREE.Vector3(54.37284229789939, -31.974990378646833, 409.91434025797344)\n\n    //      const helper = new THREE.CameraHelper( this.camera );\n\n    // this.scene.add( helper );\n    // console.log(helper)\n    // this.camera.position.copy(this.start);\n    this.controls = new _OrbitControls.OrbitControls(this.camera, this.renderer.domElement);\n    this.camera.position.set(15, 0, 150);\n    this.time = 0;\n    this.isPlaying = true;\n    this.loader.load(_walkinghall.default, function (gltf) {\n      _this.meshes = gltf.scene.children[0];\n      _this.settings();\n      _this.addObjects();\n      _this.initPost();\n      _this.addModel();\n      _this.resize();\n      _this.render();\n      // this.lights();\n      _this.setupResize();\n\n      // 0\n    });\n    // tl.to( , {\n    //   duration: 10,\n\n    // })\n    // console.log(this.camera)\n    // gsap.set(this.bloomPass, {\n    //   threshold: 0.3,\n    //   strength: 0.3,\n    //   radius: 0.85\n    // })\n    // var tl = gsap.timeline({\n    //   repeat: -1,\n    //   yoyo:true,\n    // });\n    // tl.from(this.camera.position, {\n    //   z: 350,\n    //   duration: 10,\n    //   ease: \"power2.Inout\"\n\n    // },\"start\")\n    // tl.to(this.camera.position, {\n    //   z: -80,\n    //   duration: 10,\n    //   ease: \"power2.Inout\"\n\n    // },\"start\")\n    // tl.to(this.camera.rotation, {\n    //   y: 10,\n\n    //   duration: 30,\n    //   ease: \"power2.In\"\n    // },\"start+=5.5\")\n    // tl.to(this.camera.position, {\n    //   y: 55,\n    //   x: 50,\n    //   duration: 30,\n    //   ease: \"power2.In\"\n    // },\"start+=5.5\")\n\n    // tl.to(this.camera.position, {\n    //   z: 150,\n    //   y: 150,\n    //   duration: 30,\n    //   ease: \"power2.Inout\"\n    // },\"start+=15\")\n    // tl.to(this.camera.position, {\n    //   z: 75,\n    //   duration: 30,\n    //   ease: \"power2.In\"\n    // },\"start+=25\")\n  }\n  _createClass(Sketch, [{\n    key: \"initPost\",\n    value: function initPost() {\n      this.renderScene = new _RenderPass.RenderPass(this.scene, this.camera);\n      this.bloomPass = new _UnrealBloomPass.UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 0, 0, 0);\n      // console.log(this.bloomPass)\n      this.composer = new _EffectComposer.EffectComposer(this.renderer);\n      this.composer.addPass(this.renderScene);\n      this.effect1 = new _ShaderPass.ShaderPass(_customPass.Aberration);\n      this.composer.addPass(this.bloomPass);\n      this.composer.addPass(this.effect1);\n    }\n  }, {\n    key: \"addModel\",\n    value: function addModel() {\n      var _this2 = this;\n      this.particles = [];\n      this.meshes.children.forEach(function (m) {\n        // m.material = new THREE.MeshNormalMaterial()\n        var geo = m.geometry;\n        // console.log(geo,'geo');\n        var len = m.geometry.attributes.position.array.length / 3;\n        var randoms = new Float32Array(len);\n        for (var i = 0; i < len; i++) {\n          randoms.set([Math.random()], i);\n        }\n        geo.setAttribute('randoms', new THREE.BufferAttribute(randoms, 2));\n        var particles = new THREE.Points(geo, _this2.material);\n        particles.rotation.y = -0.7;\n        // console.log(m.material,'material was', this.material);\n        // let particles =  new THREE.Mesh( geo, m.material);\n        _this2.particles.push(particles);\n        _this2.scene.add(particles);\n      });\n    }\n  }, {\n    key: \"settings\",\n    value: function settings() {\n      var that = this;\n      this.settings = {\n        progress: 0,\n        bloomThreshold: 0,\n        bloomStrength: 0.52,\n        bloomRadius: 0.74\n      };\n      this.gui = new dat.GUI();\n      this.gui.add(this.settings, \"progress\", 0, 1, 0.01);\n      this.gui.add(this.settings, \"bloomThreshold\", 0, 10, 0.01);\n      this.gui.add(this.settings, \"bloomStrength\", 0, 10, 0.01);\n      this.gui.add(this.settings, \"bloomRadius\", 0, 10, 0.01);\n    }\n  }, {\n    key: \"lights\",\n    value: function lights() {\n      this.lightAmbient = new THREE.AmbientLight(0xffffff, 1); // soft white light\n      this.scene.add(this.lightAmbient);\n      this.dir1 = new THREE.DirectionalLight(0xffffff, 1);\n      this.scene.add(this.dir1);\n      this.dir1.position.set(-1, 0.5, 0);\n      this.dir2 = new THREE.DirectionalLight(0xffffff, 1);\n      this.scene.add(this.dir2);\n      this.dir2.position.set(0, 1, 0);\n      this.dir3 = new THREE.DirectionalLight(0xffffff, 1);\n      this.scene.add(this.dir3);\n      this.dir3.position.set(0.5, -0.5, 0);\n      this.dir4 = new THREE.DirectionalLight(0xffffff, 1);\n      this.scene.add(this.dir4);\n      this.dir4.position.set(0, 0, 1);\n      this.dir5 = new THREE.DirectionalLight(0xffffff, 1);\n      this.scene.add(this.dir5);\n      this.dir5.position.set(0.5, 0.5, -0.25);\n    }\n  }, {\n    key: \"setupResize\",\n    value: function setupResize() {\n      window.addEventListener(\"resize\", this.resize.bind(this));\n    }\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      this.width = this.container.offsetWidth;\n      this.height = this.container.offsetHeight;\n      this.renderer.setSize(this.width, this.height);\n      this.camera.aspect = this.width / this.height;\n      this.camera.updateProjectionMatrix();\n    }\n  }, {\n    key: \"addObjects\",\n    value: function addObjects() {\n      var that = this;\n      var txt = new THREE.TextureLoader().load(_walkinghall2.default);\n      txt.flipY = false;\n      this.material = new THREE.ShaderMaterial({\n        extensions: {\n          derivatives: \"#extension GL_OES_standard_derivatives : enable\"\n        },\n        side: THREE.DoubleSide,\n        uniforms: {\n          time: {\n            type: \"f\",\n            value: 0\n          },\n          resolution: {\n            type: \"v4\",\n            value: new THREE.Vector4()\n          },\n          map: {\n            type: \"t\",\n            value: txt\n          },\n          uvRate1: {\n            value: new THREE.Vector2(1, 1)\n          }\n        },\n        // wireframe: true,\n        // transparent: true,\n        transparent: true,\n        vertexShader: _vertex.default,\n        fragmentShader: _fragment.default,\n        depthTest: false,\n        depthWrite: false\n      });\n      this.geometry = new THREE.PlaneGeometry(1, 1, 1, 1);\n      this.plane = new THREE.Mesh(this.geometry, this.material);\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.isPlaying = false;\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      if (!this.isPlaying) {\n        this.render();\n        this.isPlaying = true;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.isPlaying) return;\n      this.time += 0.05;\n      if (this.bloomPass) {\n        this.bloomPass.threshold = this.settings.bloomThreshold;\n        this.bloomPass.strength = this.settings.bloomStrength;\n        this.bloomPass.radius = this.settings.bloomRadius;\n      }\n      this.material.uniforms.time.value = this.time;\n      requestAnimationFrame(this.render.bind(this));\n      // this.renderer.render(this.scene, this.camera);\n      this.composer.render();\n    }\n  }]);\n  return Sketch;\n}();\nexports.default = Sketch;\nnew Sketch({\n  dom: document.getElementById(\"container\")\n});"},"sourceMaps":null,"error":null,"hash":"fee8eb2a97e049569ee16d2506b6d700","cacheData":{"env":{}}}